<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lunaverse Adventure</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000; }
        
        #game-stage {
            width: 100vw;
            height: 100vh;
            background: url('lunaverse_wallpaper.PNG') no-repeat center center;
            background-size: cover;
            position: relative;
        }

        .sprite { position: absolute; pointer-events: none; transition: transform 0.2s; }
        
        /* Animation for zooming East */
        @keyframes walkEast {
            from { left: -250px; }
            to { left: 110vw; }
        }
        .zoom-east { animation: walkEast 4s linear forwards; }
    </style>
</head>
<body>

<div id="game-stage">
    <img id="grandma" src="preserved_lemon .png" style="display:none; position:absolute; bottom:0; left:0; width:200px; z-index:10;">
</div>

<script>
    const stage = document.getElementById('game-stage');
    const grandma = document.getElementById('grandma');

    // 1. INVENTORY ARRAYS (Exact names from your repo)
    const stationarySprites = [
        'Stella.png', 'elina_stella.png', 'friend1.png', 
        'luna_kitty.png', 'luna_unicorn.png', 'read_cloud.png', 'stella_star.png'
    ];

    const eastBoundSprites = [
        'blue_azul_front.png', 'cardboard_tank.png', 'mochkil_walk_right_cake.png'
    ];

    const sounds = [
        'Luna-moon-Stella-star.mp3', 'luna_whisper.mp3', 'goodnight-adventure.mp3'
    ];

    // 2. INTERACTION LOGIC
    stage.addEventListener('click', (e) => {
        const randomChance = Math.random();

        // A. 10% Chance Grandma appears with lemons
        if (randomChance < 0.1) {
            grandma.style.display = 'block';
            setTimeout(() => { grandma.style.display = 'none'; }, 3000);
        }

        // B. Pick random Audio
        const randomAudio = new Audio(sounds[Math.floor(Math.random() * sounds.length)]);
        randomAudio.play();

        // C. Decide: Is it a Zoomer or a Popper?
        if (randomChance > 0.7) {
            // Create a "Zoomer" (East-bound)
            const zoomer = document.createElement('img');
            zoomer.src = eastBoundSprites[Math.floor(Math.random() * eastBoundSprites.length)];
            zoomer.className = 'sprite zoom-east';
            zoomer.style.top = Math.random() * 60 + 10 + '%'; // Random vertical lane
            zoomer.style.width = '180px';
            stage.appendChild(zoomer);
            setTimeout(() => zoomer.remove(), 4500);
        } else {
            // Create a "Popper" (Appears at touch point)
            const popper = document.createElement('img');
            popper.src = stationarySprites[Math.floor(Math.random() * stationarySprites.length)];
            popper.className = 'sprite';
            popper.style.left = (e.clientX - 75) + 'px';
            popper.style.top = (e.clientY - 75) + 'px';
            popper.style.width = '150px';
            stage.appendChild(popper);
            
            // Special Background Flash for Unicorn
            if (popper.src.includes('luna_unicorn.png')) {
                stage.style.filter = 'hue-rotate(90deg)';
                setTimeout(() => stage.style.filter = 'none', 1000);
            }

            setTimeout(() => popper.remove(), 2000);
        }
    });
</script>

</body>
</html>
